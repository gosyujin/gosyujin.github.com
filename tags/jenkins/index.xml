<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Jenkins on kk_Atakaの日記</title>
    <link>https://gosyujin.github.io/tags/jenkins/</link>
    <description>Recent content in Jenkins on kk_Atakaの日記</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>jp</language>
    <lastBuildDate>Tue, 26 May 2015 00:00:00 +0000</lastBuildDate>
    
	<atom:link href="https://gosyujin.github.io/tags/jenkins/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>実行ユーザの違いでJenkinsのホームディレクトリが変わって困った話</title>
      <link>https://gosyujin.github.io/2015/05/26/jenkins-environment-path/</link>
      <pubDate>Tue, 26 May 2015 00:00:00 +0000</pubDate>
      
      <guid>https://gosyujin.github.io/2015/05/26/jenkins-environment-path/</guid>
      <description>あらすじ 結構昔にWindows 7上において、以下の2通りのSeleniumスクリプト実行結果が違ってすごく困っていた。
前提条件としては、Seleniumスクリプトは同じ。実行コマンドも bundle exec ruby hoge.rb で同じ。違うのは実行の仕方だけ。
 コマンドプロンプトで実行  Seleniumスクリプト コマンドプロンプトからコマンド実行 正常終了  Jenkinsで実行  Seleniumスクリプト(「Windowsバッチコマンドの実行」でジョブに登録) リモートビルドから実行 ＼エラー／   原因の切り分け方とかもわからなかったのでかなり苦戦…。
環境  Windows 7 Jenkins 1.581 Ruby 1.9.3  bundler (1.3.5) pit (0.0.7) selenium-webdriver (2.43.0)   結論 原因はJenkinsとコマンドプロンプトでの実行時の 環境変数の違い だった。環境変数をいじって解決。
具体的に何が起こっていたかというと…。
 Seleniumスクリプトの中で pit (https://github.com/cho45/pit) というアカウントのID、パスワードを外出しできるGemを使用していた  pitの挙動は、 ~/.pit 直下にあるyamlファイルを探して、IDとパスワードを取得するというもの   コマンドプロンプトで実行したとき  実行ユーザは「今Windowsにログオンしている自分」 pitは ~/.pit = C:\Users\USER\.pit を見に行っていた  ホームディレクトリにはアカウント定義しているyamlがあるので正常に動作。まあこれはそうだよね。問題は次。
Jenkinsで実行したとき  実行ユーザは「Jenkins自体？」(コンソール出力を見るとリモートホスト127.</description>
    </item>
    
    <item>
      <title>JenkinsでAdmin権限を持つユーザのパスワードを全て忘れた時の復旧方法</title>
      <link>https://gosyujin.github.io/2012/06/19/1340106125/</link>
      <pubDate>Tue, 19 Jun 2012 00:00:00 +0000</pubDate>
      
      <guid>https://gosyujin.github.io/2012/06/19/1340106125/</guid>
      <description>[Jenkins][備忘録]JenkinsでAdmin権限を持つユーザのパスワードを全て忘れた時の復旧方法 あらすじ  ローカルで動かしているJenkinsでAdministrator権限を持っているユーザ、およびそのパスワードを忘れたので、色々な事ができなくなった また、Administrator権限を持つユーザがいない = Jenkinsの管理画面が開けなくなった事で権限復旧もできなくなった  環境  Windows XP Jenkins 1.470  ユーザ情報: Jenkinsのユーザデータベース 権限管理: 行列による権限設定 ローカルで運用している JenkinsはWindowsサービスに登録している   原因と解決手順 気づき  プラグインを入れようと思ったら、なんでかJenkinsの管理リンクが見当たらなくなった 管理画面のアドレスは /manage なので直にアクセスしてみる Firefoxだとこんなエラーが出た[1]  ！　内容符号化 (Content-Encoding) に問題があります 不正または不明な形式で圧縮されているため、ページを表示できません。 ・この問題を Web サイトの管理者に報告してください。 [再試行]  試しにChromeでもやってみたがこう  このウェブページにアクセスできません http://localhost:8080/manage のウェブページは一時的に停止しているか、 新しい http://localhost:8080/manage に移動した可能性があります。 エラー 330 (net::ERR_CONTENT_DECODING_FAILED): 不明なエラーです。  まさかのIE6。ログイン画面からレイアウト崩れてて(さすがにサポートしてないよなぁ)とか思いつつアクセスすると…  アクセスできません kk_Ataka には、Administer パーミッションがありません。 なんだと！？　…でも管理画面にいけないんだから、権限も振れないよ。どうしよう。
解決策  とりあえず、Jenkinsのディレクトリをユーザ名(kk_Atakaなど)で検索してみた…[2] すると引っかかったのはJenkinsのルートにある config.xml と大量の build.</description>
    </item>
    
    <item>
      <title>Jenkins,Redmine使いこなし勉強会に参加しました と、ちょっとプラグイン作ってみた #jen_red</title>
      <link>https://gosyujin.github.io/2012/05/28/1338209339/</link>
      <pubDate>Mon, 28 May 2012 00:00:00 +0000</pubDate>
      
      <guid>https://gosyujin.github.io/2012/05/28/1338209339/</guid>
      <description>[Ruby][イベント][Jenkins][Redmine]Jenkins,Redmine使いこなし勉強会に参加しました と、ちょっとプラグイン作ってみた #jen_red 概要  http://connpass.com/event/500/:title  前半は発表のメモ。後半は実際にプラグイン作ったりインストールしたりのメモ。
Redmineプラグイン活用入門 - @[http://twitter.com/Kokawa_Takashi:title]さん 注意:Redmine開発環境が安定していないので、すぐ陳腐化してしまう事がある！
Redmineにおける問題  Redmineの設定で解決 運用で解決 ツール自体を拡張して解決  プラグインの探し方・おすすめ REST APIを使って外部から プラグインを作る   プラグインの探し方・おすすめ  http://www.r-labs.org/projects/r-labs/wiki/Redmine%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E9%9B%86:title http://www.redmine.org/plugins:title 一つだけおすすめを… Wiki Extensions Plugin  オートプレビュー 任意のページをメニューに 任意のページを埋め込み 等々…  他のおすすめ  CodeRevirew Backlogs TimeTracker   REST API  自動でチケットを作ったりできる チケット一覧を取得できたり この一連の流れができたらJenkinsに任せる事ができる  期日が間近のチケットのメール通知などもできる   プラグインを作る  Redmine1.4 or 2.0が対象(Ruby1.9,Bundler対応している/これ以前はしていない) プラグイン開発環境構築がつらいので  Ruby環境  WindowsならRubyInstaller + DevKit MacならRVM  自分でも少しまとめている http://d.</description>
    </item>
    
    <item>
      <title>BPStudy#57に参加しました #bpstudy</title>
      <link>https://gosyujin.github.io/2012/04/28/1335575351/</link>
      <pubDate>Sat, 28 Apr 2012 00:00:00 +0000</pubDate>
      
      <guid>https://gosyujin.github.io/2012/04/28/1335575351/</guid>
      <description>[Jenkins][Sphinx][イベント]BPStudy#57に参加しました #bpstudy 詳細: http://connpass.com/event/365/:title  例の特許庁最適化計画プロジェクトを通してITビジネスの仕方を変えよう  というなかなかに興味深い内容だったので参加。
第一部 新たな価値観へのITビジネス視点での転換 萩本順三さん  政治的な話は無し 私が技術顧問として最適化計画を見た時、「古いな～」と思った  問題があるプロジェクトに入り込んで、どうするかというのが仕事  火を吹いた時に入り込んでいく =&amp;gt; はじめにオフィスへ入り込んで資料を見た時「これやめないんですか？」と聞いたほど   かなりはじめの段階からダメと周りの人にも言っていたが……  何が問題か？  技術を特許庁の業務にどう活かすかの具体性がない  xml使ったからどうなんの？  業務モデルを1000名で書いてどうすんの？ むしろ主役は特許庁なのでは？ =&amp;gt; 放り投げ主義 業務モデルは発注者の理解と覚悟の元作成するはずなのに！  根底の問題は？  IT業界の負のビジネス慣習  ユーザ、開発両者のスキル不足  お客さんに教えながらモデル化をしていくものなのに   コスト配分が開発者寄りになり、たとえいいものを作ったとしてもユーザさんが使いこなせない うまく要件を引き出せないと、正しくないシステムができてしまう 是正しなければ  意識改革 コタツモデル  ユーザから話を聞いてシステム開発に入るが、ユーザは必ず正しいのか 以下の3つから&amp;rdquo;将来&amp;rdquo;の価値を取りに行く視点を持つ  戦略的視点(偉い人) 業務問題解決の視点(業務担当の偉い人) IT活用の視点(開発の出来る人)  しかし、偉い人は現在の価値を取りに行きがちだし、業務担当の偉い人は業務問題解決の視点しか持っていないことが多い 戦略的視点から業務解決、IT活用をしていくと、偉い人も「あ、俺業務知らなかったな」と感じで同じコタツに入ってくれる =&amp;gt; 要求が収束する Howの手探り  ビジネス戦略から  Howの突き上げ  テクノロジーを使うともしかしたら業務がいらなくなるかもしれない =&amp;gt; 戦略に結びつける  最適化  切ってつなげて並行でスピーディに走らせる  常に価値で問う  設計ドキュメントなどは誰に対して価値があるのかを問う。説明できなければいらないじゃない？(ただし、技術的に説明できない場合もある)  自分が持っている知識をお客さんに魅力的に見えるものとする 自分のやりたいこと(How)を実現していこう(What)  自動車メーカ、ファッション業界ではできているのになぜソフトウェア業界でできない システム要求の牢屋に閉じ込められていたらできっこない   5年後のIT業界  巨大システムの開発(一枚岩)からアクセサリ化に  コーディネート化する必要がある 開発者が一番強い。なぜならHowを握っているから  ピラミッド型組織から分散自立型組織に  優秀な人は残して優秀じゃない人は返す、返された人は価値に敏感になれるように  学び、勇気を持って行動してください  第二部 執筆プロジェクトの継続的ビルド [https://twitter.</description>
    </item>
    
    <item>
      <title>simplecovとsimplecov-rcovを使ってJenkinsでカバレッジを確認</title>
      <link>https://gosyujin.github.io/2012/03/27/1332856400/</link>
      <pubDate>Tue, 27 Mar 2012 00:00:00 +0000</pubDate>
      
      <guid>https://gosyujin.github.io/2012/03/27/1332856400/</guid>
      <description>[Windows][Jenkins][Ruby][備忘録]simplecovとsimplecov-rcovを使ってJenkinsでカバレッジを確認 あらすじ rcovインストールに思いの他てこずったので他のツールを検討してみる。
調べるとsimplecov,simplecov-rcovというツールでもいける様子。Ruby1.9系のカバレッジツールらしいが1.8でも使えるだろうか。あとRailsじゃなくても使えるのかな。
参考サイト  [https://github.com/colszowka/simplecov:title] [https://github.com/fguillen/simplecov-rcov:title]  手順(Getting Startedをかなりはしょりながら) Simplecov Gemfileに以下を追加。
gem &amp;#39;simplecov&amp;#39; 次にspecファイルに以下のrequireを追加。
require &amp;#39;simplecov&amp;#39; SimpleCov.start そしてrspecを実行。
$ bundle exec rspec -fs spec\convert_spec.rb WARNING: SimpleCov is activated, but you&amp;#39;re not running Ruby 1.9+ - no coverage analysis will happen WARNING: SimpleCov is activated, but you&amp;#39;re not running Ruby 1.9+ - no coverage analysis will happen やっぱ1.8じゃだめかー。ちょっとRuby1.9系で試してみる。
$ bundle exec rspec -fs spec\convert_spec.rb (略) Coverage report generated for RSpec to C:/project/excel_for_ruby/coverage.</description>
    </item>
    
    <item>
      <title>Windows環境用にrcovをビルドしなおす手順</title>
      <link>https://gosyujin.github.io/2012/03/20/1332240122/</link>
      <pubDate>Tue, 20 Mar 2012 00:00:00 +0000</pubDate>
      
      <guid>https://gosyujin.github.io/2012/03/20/1332240122/</guid>
      <description>[Windows][Jenkins][Ruby][備忘録]Windows環境用にrcovをビルドしなおす手順 あらすじ Jenkinsでビルドしていくとともにカバレッジの調査もしたい。rcovというツールでカバレッジを出す事ができるらしい。
参考サイト  [https://github.com/relevance/rcov:title] http://rubygems.org/gems/rcov:title http://www.freia.jp/taka/blog/762/:title  先に結論 Windows環境ではWindows用に自力でビルドしなければならない！
 [http://rubygems.org/gems/rcov:title]よりgemをDL [http://www.microsoft.com/japan/msdn/vstudio/express/:title]からVisual C++ 2010 Express Editionを入手しインストール 全てのプログラム -&amp;gt; Microsoft Visual Studio 2010 Express -&amp;gt; Visual Studio コマンド プロンプト (2010)を起動。以後ビルドはこのプロンプトで実施する %RUBY_HOME%\lib\ruby\1.8\i386-mswin32\のconfig.hのMSC_VERの記述を一旦消す  #if _MSC_VER != 1200 #error MSC version unmatch: _MSC_VER: 1200 is expected. #endif  env.hのFRAMEを以下のように編集  extern struct FRAME { extern __declspec(dllimport) struct FRAME {  gem install！！  以下は四苦八苦した記録の残骸。
手順(本当に順番をメモっているのでいらない操作が多い) rcovインストール BundlerでGemを管理するのでGemfileにrcovを追加。
gem &amp;#39;rcov&amp;#39; 追加後、インストール……</description>
    </item>
    
    <item>
      <title>GitプロジェクトをコミットしたタイミングでJenkinsにビルドをしてもらいたい！</title>
      <link>https://gosyujin.github.io/2012/02/23/1330001338/</link>
      <pubDate>Thu, 23 Feb 2012 00:00:00 +0000</pubDate>
      
      <guid>https://gosyujin.github.io/2012/02/23/1330001338/</guid>
      <description>[Jenkins][備忘録][Git]GitプロジェクトをコミットしたタイミングでJenkinsにビルドをしてもらいたい！ あらすじ  全然CIっぽくJenkinsを使っていなかったので本格的に使ってみたい。 Gitを連携させたい GitリポジトリにコミットしたタイミングでJenkinsにビルドさせてみたい  …のだが、いきなりビルド時にcloneできないという現象でハマっていた。
ERROR: Error cloning remote repo &amp;#39;origin&amp;#39; : Could not clone C:/project/excel_for_ruby.git 上記の原因 cloneできない問題はJenkins実行時にgit.exeにパスが通ってなかった、設定していなかったという非常に残念なものだった。Jenkins実践入門にも手順が書いてあった。[1]
Jenkinsの「ビルド実行」でGitリポジトリのソースのテストをする  Jenkinsの管理 =&amp;gt; プラグインの管理 =&amp;gt; Jenkins GIT plugin をインストール 新規ジョブ作成 =&amp;gt; フリースタイル・プロジェクト でプロジェクト作成 ソースコードシステム  Gitを選択 リポジトリを入力  C:\project\excel_for_ruby   ビルド  Windowsバッチコマンドの実行  rspecを実行できるように記述する    cd &amp;#34;C:\project\excel_for_ruby&amp;#34; rspec -fs spec\* これでビルドするとはじめのcloneできないエラー。
Error cloning remote repo &amp;#39;origin&amp;#39; : Could not clone C:\project\excel_for_ruby  Jenkinsから見たGitのパスを設定  Jenkinsの管理 =&amp;gt; システムの設定  Gitのパスを追加するフォームがあるのでこれを追加 Nameもなんでもいいから入力する(Defaultにした)    GitでCommitしたらJenkinsがビルドをしてくれるようにする 「wget ビルド実行パス」というコマンドをGitのフックスクリプトに記述すればコミット時にビルド実行できるらしい。とりあえずWindows用のwgetを取得。http://users.</description>
    </item>
    
  </channel>
</rss>