---
layout: post
title: "DAT装置の使い方 超簡易版(Solaris)"
description: ""
category: ""
tags: [Solaris]
old_url: http://d.hatena.ne.jp/kk_Ataka/20111201/1322746718
---

\[Solaris\]\[備忘録\]DAT装置の使い方 超簡易版(Solaris)
------------------------------------------------------

あらすじ
--------

結局はtarコマンド+αなんだけど、どうもDAT装置とテープというデバイスが使い慣れないので操作方法をメモしておく。とりあえず

-   状態確認
-   何も考えずに書き込み
-   全部取り出し

くらい。

コマンド
--------

使用するコマンドはmt(磁気テープの制御)とtar。まずはmt。

### テープの状態表示

-   -fオプションでテープデバイスの指定
-   /dev/rmt/0はテープデバイスのパス

<!-- -->

    $ mt -f /dev/rmt/0 status

### テープの巻き戻し

今回は使わなかった。

    $ mt -f /dev/rmt/0 rewind

### テープの取り出し

データの取り出しではなく、DAT装置からの取り出し。

    $ mt -f /dev/rmt/0 offline

ここからtar。

-   fオプションはtarファイル引数の指定。
    -   fを省略した場合は$TAPE(設定されている場合)
    -   $TAPEもない場合は/etc/default/tarを見に行く[1]
-   vオプションはファイル名の出力

### テープの内容を表示

-   tオプションは指定されたtarファイルの内容一覧表示

<!-- -->

    $ tar tvf /dev/rmt/0

tオプションで表示される内容はこんな感じ。

    $ tar tf test.tar
    test/aaa.txt
    ...

vオプションと併用すると詳細に。

    $ tar tvf openssl-xxx.tar
    -rw-r--r--   9/9    99999  3月 19日 22:22 2011年 test/aaa.txt
    ...

### テープへ書き込み

-   cオプションは作成

<!-- -->

    $ tar cvf /dev/rmt/0 FILE

### テープ内データの取り出し

-   xオプションはファイルの抽出、復元。テープに入ったデータがそのまま復元される

<!-- -->

    $ tar xvf /dev/rmt/0

テープに/tmp/AAA.tarが書き込まれている場合、上記コマンドを実行すると/tmp/下に復元する。

[1] 必ずf指定してたからこれは知らなかった
