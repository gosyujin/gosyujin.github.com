<!DOCTYPE html>
<html lang="ja">
  <head>
    <title>Subversionでファイルを分けてコミットする - kk_Atakaの日記</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="/static/css/github-markdown.css">
    <link rel="stylesheet" href="/static/css/highlight.css">
    <style>
      .markdown-body {
        min-width: 200px;
        max-width: 790px;
        margin: 0 auto;
        padding: 30px;
      }
    </style>
    <link rel="icon" href="/static/favicon.ico">
  </head>
  <body>
    <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-34929069-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


    <a href="/">kk_Atakaの日記</a>
    <a href="/archives.html">Archive</a>
    <a href="/tags.html">Tag</a>
    <a href="/pages.html">Page</a>

    <article class="markdown-body">
      <h1><a href="/2012/04/02/1333369857">Subversionでファイルを分けてコミットする</a></h1>
      <div class="published">
       
          <span>Tags: </span>
          
            <span>[ <code><a href="/tags.html#Subversion" class="tag">Subversion</a></code> ]</span>
          
            <span>[ <code><a href="/tags.html#備忘録" class="tag">備忘録</a></code> ]</span>
          
        
        
          <span>Published: 2012/04/02</span>
        
      </div>



<div class="pagination">
  <ul>
    
      <li class="prev">
        <a href="/2012/04/01/1333220954" title="BPStudy#55に参加しました">
          BPStudy#55に参加しました
        </a>
      </li>
    
    <li>
      <a href="/archives.html">Archive</a>
    </li>
    
      <li class="next">
        <a href="/2012/04/05/1333553936" title="VimでBundler(プラグイン管理)するvundleインストール手順">
          VimでBundler(プラグイン管理)するvundleインストール手順
        </a>
      </li>
    
  </ul>
</div>




<div class="content">
<h1>あらすじ</h1>
<p>コマンドラインからファイルをたくさんコミットしたいんだけど、コミットログを分けたいので分割してコミットしたい。</p>
<h1>参考サイト</h1>
<ul><li><a href="http://www.caldron.jp/~nabetaro/svn/svnbook-1.5-final/html-chunk/svn.ref.svn.c.changelist.html">svn changelist</a></li><li><a href="http://d.hatena.ne.jp/namutaka/20110125/1295964889">SVNでchangelistに所属していないファイルを扱う方法  - namutakaの日記</a></li><li><a href="http://www-aos.eps.s.u-tokyo.ac.jp/~takagi/subversion.html#sec16">http://www-aos.eps.s.u-tokyo.ac.jp/~takagi/subversion.html#sec16</a></li><li><a href="http://blog.cgfm.jp/garyu/archives/83">svnで間違ったコミットをmergeで戻すコマンドのメモ | 我流天性 がらくた屋</a></li></ul>
<h1>方法</h1>
<p>なんかいっぱいファイルがあるとする。</p>
<pre class="">$  ls
a001.html            a019.html            a037.html            a055.html            a073.html            a091.html
a002.html            a020.html            a038.html            a056.html            a074.html            a092.html
a003.html            a021.html            a039.html            a057.html            a075.html            a093.html
a004.html            a022.html            a040.html            a058.html            a076.html            a094.html
a005.html            a023.html            a041.html            a059.html            a077.html            a095.html
a006.html            a024.html            a042.html            a060.html            a078.html            a096.html
a007.html            a025.html            a043.html            a061.html            a079.html            a097.html
a008.html            a026.html            a044.html            a062.html            a080.html            a098.html
a009.html            a027.html            a045.html            a063.html            a081.html            a099.html
a010.html            a028.html            a046.html            a064.html            a082.html            index.html
a011.html            a029.html            a047.html            a065.html            a083.html            link.html
a012.html            a030.html            a048.html            a066.html            a084.html            menu.html
a013.html            a031.html            a049.html            a067.html            a085.html            product.html
a014.html            a032.html            a050.html            a068.html            a086.html
a015.html            a033.html            a051.html            a069.html            a087.html
a016.html            a034.html            a052.html            a070.html            a088.html
a017.html            a035.html            a053.html            a071.html            a089.html
a018.html            a036.html            a054.html            a072.html            a090.html</pre>
<p>で、全部管理下。</p>
<pre class="">$  svn  st
A              .
A              a048.html
A              a084.html
A              a076.html
A              a068.html
A              a096.html
A              product.html
A              a088.html
略</pre>
<p>順番としては、index,  link,  menu,  productを一回目にコミット、その後はaxxx.htmlファイルを20個ずつコミットしていく全6回のコミット作業をしたい。</p>
<p>毎回</p>
<pre class="">$  svn  commit  a001.html  a002.html  a003.html  ...  </pre>
<p>とするのはめんどうくさいしミスもしそうなのでこれを上手くコミットしたい。いろいろありそうだけど、とりあえずいけそうだと思ったのはchangelist(cl)コマンドを使ってコミット毎にグループを作り、グループ単位で作業していくという戦法。</p>
<h2>Changelist作成</h2>
<p>changelist(cl)コマンドで特定のファイルをグループにできる。</p>
<pre class="">$  svn  cl  CHANGE_LIST_NAME  FILE1  FILE2  ...  </pre>
<pre class="">$  svn  cl  mainpage  index.html  link.html  menu.html  product.html
パス  'index.html'  は変更リスト  'mainpage'  に属しています。
パス  'link.html'  は変更リスト  'mainpage'  に属しています。
パス  'menu.html'  は変更リスト  'mainpage'  に属しています。
パス  'product.html'  は変更リスト  'mainpage'  に属しています。</pre>
<p>これでindex,  link,  menu,  productはmainpageというグループに所属した。うーん。ここのファイル指定が手作業になっちゃうとあまり意味がないような気もするが……。ステータスを見るとちゃんと他のファイルｔ区別されている。</p>
<pre class="">$  svn  st
A              .
A              a048.html
略
A              a092.html

---  変更リスト  'mainpage':
A              product.html
A              menu.html
A              link.html
A              index.html</pre>
<p>以後、index.htmlたちはchangelist  mainpageとして指定する事ができる。今回は連番なので一括で指定もできるがファイル名に統一性がない場合は一個ずつ指定するしかないかな。</p>
<pre class="">$  svn  cl  a021-40  a0{21..40}.html
パス  'a021.html'  は変更リスト  'a021-40'  に属しています。
パス  'a022.html'  は変更リスト  'a021-40'  に属しています。
パス  'a023.html'  は変更リスト  'a021-40'  に属しています。
略</pre>
<p>略。でchangelistが6つできた。</p>
<pre class="">$  svn  st
---  変更リスト  'a001-20':
A              a001.html
略
---  変更リスト  'mainpage':
A              product.html
略
---  変更リスト  'a021-40':
A              a021.html
略
---  変更リスト  'a081-100':
A              a084.html
略
---  変更リスト  'a041-60':
A              a048.html
略
---  変更リスト  'a061-80':
A              a076.html
略</pre>
<h2>Commit</h2>
<p>commitコマンドに--changelistオプションを指定。</p>
<pre class="">$  svn  commit  --changelist  CHECK_LIST_NAME</pre>
<p>changelistを指定すると……</p>
<pre class="">$  svn  commit  --changelist  mainpage
          1
          2    --  この行以下は無視されます  --
          3
          4    A        checklistdir/product.html
          5    A        checklistdir/menu.html
          6    A        checklistdir/link.html
          7    A        checklistdir/index.html</pre>
<p>そのグループのファイルだけが選択される。一回コミットするとchangelistはなくなるが、--keep-changelistsオプションを使えば残したままにできる。</p>
<pre class="">$  svn  commit  --cl  mainpage  --keep-changelists</pre>
<p>ステータスを見ると残っている！　ただし、ファイルの変更はないのでAとかMとかはついていない。</p>
<pre class="">$  svn  st
略
---  変更リスト  'mainpage':
                product.html
                menu.html
                link.html
                index.html</pre>
<p>とりあえずこんな感じか。</p>
</div>

<div class="pagination">
  <ul>
    
      <li class="prev">
        <a href="/2012/04/01/1333220954" title="BPStudy#55に参加しました">
          BPStudy#55に参加しました
        </a>
      </li>
    
    <li>
      <a href="/archives.html">Archive</a>
    </li>
    
      <li class="next">
        <a href="/2012/04/05/1333553936" title="VimでBundler(プラグイン管理)するvundleインストール手順">
          VimでBundler(プラグイン管理)するvundleインストール手順
        </a>
      </li>
    
  </ul>
</div>


<div class="social-module">
    <br>
  <!-- Tweet Button -->
  <a href="https://twitter.com/share"
     data-url="http://gosyujin.github.io/2012/04/02/1333369857" data-text="kk_Atakaの日記 - Subversionでファイルを分けてコミットする" data-related="kk_Ataka"
     data-lang="ja" data-size="horizontal" data-dnt="true" class="twitter-share-button">Tweet</a>
  <script type="text/javascript" src="http://platform.twitter.com/widgets.js" charset="utf-8" async="async"></script>

  <!-- Hatena Bookmark Users -->
  <a href="http://b.hatena.ne.jp/entry/http://gosyujin.github.io/2012/04/02/1333369857/">
    <img src="http://b.hatena.ne.jp/entry/image/http://gosyujin.github.io/2012/04/02/1333369857/" />
    </a>
  <!-- Hatena Bookmark Button -->
  <a href="http://b.hatena.ne.jp/entry/http://gosyujin.github.io/2012/04/02/1333369857/"
     data-hatena-bookmark-title="kk_Atakaの日記 - Subversionでファイルを分けてコミットする"
     data-hatena-bookmark-layout="standard" class="hatena-bookmark-button" title="add Hatena bookmark">
    <img src="http://b.st-hatena.com/images/entry-button/button-only.gif"
	 alt="add Hatena bookmark" width="20" height="20" style="border: none;" />
    </a>
  <script type="text/javascript" src="http://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>

  <!-- Hatena Bookmark comment http://blog.masuidrive.jp/2008/04/17/released-hatena-bookmark-anywhere/ -->
  <script type= "text/javascript">/*<![CDATA[*/
var hatena_bookmark_anywhere_limit = 999; // 表示する件数
// var hatena_bookmark_anywhere_style = true; // trueでデフォルトスタイル falseを設定するとCSSでスタイルの指定が可能
// var hatena_bookmark_anywhere_collapse = false; // trueにすると、コメントの書いてないブクマを表示しない。指定しない場合は、表示件数を超えた場合のみコメントを表示しない
var hatena_bookmark_anywhere_url = "http://gosyujin.github.io/2012/04/02/1333369857/"; // 表示するURL 未指定の場合、現在のページ
/*]]>*/</script>
  <script src="https://rawgithub.com/masuidrive/hatena-bookmark-anywhere/master/hatena-bookmark-anywhere-0-1.js" type="text/javascript" charset="utf-8"></script>
  <div id="hatena_bookmark_anywhere"></div>
</div>


<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'kkataka'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>


    </article>
    <hr />
    <address>Author: kk_Ataka / Powered by Jekyll on GitHub Pages</address>
  <body>
</html>

